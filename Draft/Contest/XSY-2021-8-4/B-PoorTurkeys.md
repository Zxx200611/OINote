有 $n$ 只鸡，编号为 $1$ 至 $n$，$m$ 个操作。

每次操作形如 $(i,j)$：

+ 若点 $i$，$j$ 都未被吃，则吃 $i$，$j$ 中任意一只。
+ 若点 $i$，$j$ 中有一个被吃了，则吃剩下的那只。
+ 若点 $i$，$j$ 都被吃了，则不作任何操作。

问最后有哪些鸡对有可能同时留到最后。

---

考虑鸡 $x$​ 可以留下的条件：每一次形如 $(x,y)$ 的操作，$y$ 当时必须活着，且这次操作吃 $y$。否则 $x$ 一定不能留下。

那么就可以倒序考虑操作：

设 $f_{x,i}$ 表示若最后希望鸡 $x$ 留下来，鸡 $i$ 是否需要为 $x$ 服务。

则对于一次操作 $(a,b)$：

+ 若 $f_{i,a} = f_{i,b} = 1$，则 $a$，$b$ 必须要死一只，假设死 $a$，则接下来 $(i,a)$ 的那次操作 $i$ 就死定了。$i$ 不能留到最后。
+ 若 $f_{i,a}$ 和 $f_{i,b}$ 有一个为 $1$，设 $f_{i,a}$ 为 $1$，则必须吃 $b$，那 $b$ 也必须留到这次操作。令 $f_{i,b} = 1$。
+ 若 $f_{i,a} = f_{i,b} = 0$，则这次操作对 $i$ 无关，吃哪只无所谓。不改变 $f$。

那么只需要枚举 $i$，$O(nm)$ 即可算出全部的 $f$。

考虑如何让鸡 $x$ 和 $y$ 一起留下来：对于所有 $1 \le i \le n$，$f_{x,i}$ 和 $f_{y,i}$ 均不为 $1$。

因为一只鸡若为 $x$ 服务而死，一定不能再对 $y$​​ 服务。​

那么这题就做完了。