有一个 $N \times N$ 的 $01$​ 矩阵，满足一开始 $1$ 的个数不会太多。

现在，若 $(x,y)$，$(y,z)$ 都是 $1$，则 $(z,x)$ 也会变成 $1$。

问最后会有多少 $1$。

---

问题可以化为：

有一个 $N$​​ 个点的有向图，一开始有一些边。需要把所有包含三个点的链补成三元环。问最后的边数。



对于这种将 $k$ 元链补成 $k$ 元环的题，实际上是有通解的：$k$ 染色。

也就是：

1. 将原图的每个连通块的边指定一个方向，满足从某个点可以到达块内所有点，将此点染为 $1$。
2. 从这个点开始 DFS，第二层染为 $2$，第三层染为 $3$，......，第 $i$ 层染为 $i \bmod k +1$。
3. 统计答案
    + 若此连通块发生冲突（某点染两种颜色）：类似于所有颜色连通了，可以将此连通块补成完全图，设连通块内点数为 $n$​，则对答案的贡献为 $\frac{n (n+1)}{2}$​。
    + 若此连通块内不发生冲突，但没用完颜色：易发现此图中不存在 $k$ 元链，贡献为原来的边数。
    + 若此连通块内不发生冲突，用完了颜色：对于每种颜色 $i$​，可以补全所有形如 $i \rightarrow i+1$​ 的边。设染为颜色 $i$​ 的点有 $cnt_i$​ 个，则贡献为 $cnt_1 \times cnt_2  + \dots + cnt_{k-1} \times cnt_k + cnt_k \times cnt_1$​​。



对于这一题，将 $k$ 改为 $2$​ 直接做即可？并不是，因为它是有向图。

我们将它当做无向图来做，每一条边设置一个边权，原图中的边设成 $1$，反向边设成 $-1$，那么下一个点的颜色就是这个点的颜色加边权，做即可。