有 $n$ 堆石子，第 $i$ 堆有 $A_i$ 个。

有两个人 A 和 B，轮流操作石子。每次操作如下：

+ 从所有剩余石子数大于 $1$ 的堆中选出堆拿走一个。
+ 再将所有石子堆个数除以它们的 $\gcd$。

问是先手 A 必胜还是后手 B 必胜。

---

显然，若出现 $1$，则游戏结果已经确定了：若有奇数个偶数堆，则先手必胜，否则先手必败。其中偶数堆指石子个数为偶数的堆。

因为偶数堆拿奇数次后会变成 $1$。有奇数个偶数堆，则拿奇数次后全为 $1$​​，而面对全为一的后手一定是必败的。



考虑不出现 $1$​ 的情况：

谨记每次**操作完后 $\gcd$​ 一定为 $1$​​​**（不全为偶数堆），且所有堆**不含有 $1$​**。

T1. 有奇数个偶数堆：

+ 此时我方是优势的，且可以保持。

+ 我方无论拿哪种，都是偶数个偶数堆，且容易保证奇数堆的个数大于等于 $2$​。（拿偶数堆就可以了）
+ 此时对方无论拿哪种，都会将奇数堆的个数变回偶数，且不可以出现 T2 中的「机会」。

是先手必胜状态。

T2. 有偶数个偶数堆：

+ 此时我方是劣势，且很难反转。

+ 若有多于一个奇数堆：此时面对的是对方在 T1 中的状态，毫无办法。

+ 若仅有一个奇数堆：这是唯一的机会，此时可以拿这个奇数堆，再将所有数除掉一个东西。此时一定会除出奇数，至于有多少奇数堆，接下来能不能赢我们不管，但这么做一定不会差（毕竟原来是必输）。可以当做是递归下去了。

那么问题就解决了。只有一种情况需要往下递归，且每次一定除掉至少 $2$，所以